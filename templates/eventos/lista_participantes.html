{% extends '_layout1.html' %}
{% load static %}

{% block head_title %}
    Participantes do Evento
{% endblock %}

{% block content %}
    <div class="container mt-5">
        <a href="{% url 'gerenciar_evento' slug=evento.slug %}" class="btn btn-secondary">
             ← Voltar para Gestão do Evento
        </a>
        <h1>Gerenciar Participantes</h1>
        <hr>

        <div class="row text-center mb-4">
            <div class="col-md-3">
                <div class="card bg-primary text-white p-3">
                    <h5 class="card-title">Total de Participantes</h5>
                    <p class="card-text fs-4">{{ total_participantes }}</p>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card bg-success text-white p-3">
                    <h5 class="card-title">Vão Trabalhar</h5>
                    <p class="card-text fs-4">{{ vao_trabalhar }}</p>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card bg-secondary text-white p-3">
                    <h5 class="card-title">Participantes</h5>
                    <p class="card-text fs-4">{{ nao_vao_trabalhar }}</p>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card bg-warning text-white p-3">
                    <h5 class="card-title">Pagamentos Pendentes</h5>
                    <p class="card-text fs-4">{{ pagamentos_pendentes }}</p>
                </div>
            </div>
        </div>

        <div class="table-responsive">
            <table class="table table-striped table-hover">
                <thead>
                    <tr>
                        <th>Nome Completo</th>
                        <th>Pagamento</th>
                        <th>Trabalha</th>
                        <th>Ações</th>
                    </tr>
                </thead>
                <tbody>
                    {% for participante in participantes %}
                        <tr>
                            <td>{{ participante.nome_completo|default:"N/A" }}</td>
                            <td>
                                <span class="badge {% if participante.pagamento_recebido %}bg-success{% else %}bg-warning{% endif %}">
                                    {% if participante.pagamento_recebido %}Pago{% else %}Pendente{% endif %}
                                </span>
                            </td>
                            <td>
                                <span class="badge {% if participante.trabalha_no_evento %}bg-success{% else %}bg-secondary{% endif %}">
                                    {{ participante.trabalha_no_evento|yesno:"Sim,Não" }}
                                </span>
                            </td>
                            <td>
                                <a href="{% url 'editar_participante' participante.id %}" class="btn btn-warning btn-sm">Editar</a>
                                <a href="{% url 'detalhes_participante' participante.id %}" class="btn btn-info btn-sm">Detalhes</a>
                            </td>
                        </tr>
                    {% empty %}
                        <tr>
                            <td colspan="4" class="text-center">Nenhum participante encontrado.</td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
{% endblock %}